<!doctype html>
<html>
    <head>
        <meta charset="utf-8">        
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0">


        <title>JMS RT</title>
    
        <link rel="stylesheet" href="scripts/bootstrap-3.3.7/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="scripts/technicalrep_tp.css">

        <!-- jQuery library -->
        <script src="scripts/jquery-3.3.1.min.js"></script>

        <!-- Latest compiled JavaScript -->
        <script src="scripts/bootstrap-3.3.7/dist/js/bootstrap.min.js"></script>    

        <link rel="stylesheet" href="scripts/rotate.css">
        <script src="scripts/globals.js"></script>    
        <script src="scripts/technicalrep_tp.js"></script>    

        <!-- sweet alert -->
        <script src="scripts/sweetalert/sweetalert.min.js"></script>
        <link rel="stylesheet" href="scripts/sweetalert/sweetalert.css">

        <script>
            $(document).ready(function () {
              $(".navbar-nav li div").click(function(event) {
                $(".navbar-collapse").collapse('hide');
              });
            });
        </script>
        
        <style>
            body { 
                padding-top: 70px;
                /*background-color: #273;*/ 
            } /*otherwise, nav-bar will block content bhynd it*/
            .menu-item { font-size: 1.2em;}
            .panel {background-color:#fff;}
        </style>
        
    </head>

    <body>
        <div class="rotate" id="loading_div"
            style="
                position:fixed; 
                left:45%; 
                top:45%; 
                z-index:5; 
                font-size:2em;
                color:green;
                display: none;
                ">
            <strong>......</strong>
        </div>

        <div class="modal fade" id="edit-account-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Edit Account</h4>
              </div>
              <div class="modal-body">
                    <label>Password</label>
                    <input id="account_pswd" type="text" class="form-control" placeholder="if empty, wont be updated">
                    <br>
                    <label>Email</label>
                    <input id="account_email" type="text" class="form-control" placeholder="if empty, wont be updated">
                    <br>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Back</button>
                <button type="button" class="btn btn-success" onclick="_edit_account()">Update</button>
              </div>
            </div>
          </div>
        </div>

        <nav class="navbar navbar-inverse navbar-fixed-top">
          <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>                        
              </button>
              <a class="navbar-brand" href="#">JMS RT (TechnicalRep-TP)</a>
            </div>
            <div>
              <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav">
                  <li class="menu-item"><div><strong style="color: #ab2;" 
                  onclick="document.getElementById('chatroom').style.display = 'block';">Support</strong></div></li><br>
                  <li class="menu-item"><div><strong style="color: #3b2;" onclick="edit_account()">My Account</strong></div></li><br>
                  <li class="menu-item"><div><strong style="color: #369;" onclick="logout()">Logout</strong></div></li><br>
                  <li class="menu-item"><div><strong style="color: #b32;" onclick="quit()">Quit Application</strong></div></li>
                </ul>
              </div>
            </div>
          </div>
        </nav>

        <div class="modal fade" id="my-reports-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">My Reports</h4>
              </div>
              <div class="modal-body">
                    <div class="input-group">
                        <span class="input-group-addon">Date</span>
                        <select id="report_date" class="form-control" onchange="fetch_my_reports(this)">
                            <option>-- select date --</option>
                            <option>Today's Reports</option>
                            <option>Yesterday's Reports</option>
                        </select>
                    </div><br>
                    
                    <table class="table table-responsive table-striped table-bordered">
                        <thead style="background-color: #444; color:white;">
                            <tr>
                                <th>Time</th>
                                <th>Client/Facility</th>
                            </tr>
                        </thead>
                        
                        <tbody id="my_reports_tbody"></tbody>
                    </table>

              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Back</button>
              </div>
            </div>
          </div>
        </div>


        <div class="container">
            <form>
                <div class="input-group">
                    <span class="input-group-addon">Facility</span>
                    <input id="facility" type="text" class="form-control" placeholder="facility name">
                </div><br>

                <div class="input-group">
                    <span class="input-group-addon">Support areas</span>
                    <select id="areas_supported" type="select" class="form-control" multiple></select>
                </div><br>

                <div class="input-group">
                    <span class="input-group-addon" style="padding-right:5px;">Incharge</span>

                        <div class="input-group" style="padding-left:2px;">
                            <span class="input-group-addon">names.</span>
                            <input id="incharge_names" type="text" class="form-control" placeholder="names">
                        </div>

                        <div class="input-group" style="padding-left:2px;">
                            <span class="input-group-addon">contact</span>
                            <input id="incharge_contact" type="number" class="form-control" placeholder="number">
                        </div>

                </div><br>


                <p></p>
                <div class="panel panel-success">
                    <div class="panel-heading"><strong>Trainees</strong></div>
                        <br>
                        
                        <div class="container" id="trainees_div"></div>
                        
                        <p></p>
                        
                        <div>
                            <button type="button" class="btn btn-success trainee_btn" onclick="new_trainee()">+</button>
                        </div>

                    </div>


                <p></p>
                <div class="form-group">
                    <label>Remark</label>
                    <textarea id="remark" class="form-control" rows="5" placeholder="type here..."></textarea>
                </div>                 



                <p></p>
                <div>
                    <button type="button" class="btn btn-info" style="width:48%;" 
                        onclick="
                        document.getElementById('report_date').value = '-- select date --';
                        show_modal('my-reports-modal');">My Reports</button>
                    <button id="send" type="button" class="btn btn-success" style="width:48%; left:50%;" onclick="send_report()">Submit</button>
                </div>
                <p></p>

            </form>
        </div>

        <div id="chatroom" style="
            position:fixed;
            left: 0%;
            top:0%;
            
            width: 100%;
            height: 100%;
            
            background: #111;
            opacity: 0.99;

            z-index:1000000;
            
            overflow: auto;
        ">
            <div id="chat-container" 
                style="
                    position:fixed; 
                    left:0%; 
                    width:100%; 
                    height:90%;
                    top: 2%;

                    border-radius: 5px;
                "
            ></div>
            
            <button style="
                position:fixed;

                width: 30%;
                left: 35%;
                
                top: 94%;
                height: 5%;
                
                background: red;
                color: white;
                
                border: 2px;
                border-radius: 5px;
                "
                
                onclick="document.getElementById('chatroom').style.display = 'none';"
            >Back</button>      
        </div>
        <script>
            var _ = document.getElementById("chatroom");
            CHAT_DIV_DIMENSIONS = [_.offsetWidth, _.offsetHeight];
            _.style.display = "none";
        </script>
        <script id="load_embedded_js_script"></script>
        <script>
            document.getElementById("load_embedded_js_script").src=CHAT_URL+"static/embedded/embedded.js";
        </script>

    </body>
</html>